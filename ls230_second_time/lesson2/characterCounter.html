<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <style type="text/css">
      .composer {
        background: #f5f5f5;
        padding:  1em;
        width:  30em;
      }

      .composer textarea {
        width: 100%;
        height: 4em;
      }

      .composer textarea.invalid {
        color: red;
      }
    </style>
  </head>
  <body>

    <div class="composer">
      <textarea placeholder="Enter your message"></textarea>
      <p class="counter"></p>
      <button type="submit">Post Message</button>
    </div>

    <script>
      // document.addEventListener('DOMContentLoaded', function() {
      //   var textarea = document.querySelector('textarea');
      //   var p = document.querySelector('.counter');
      //   var charsRemaining = '140';
      //   p.textContent = charsRemaining + ' characters remaining';
      //
      //   textarea.addEventListener('keypress', function(e) {
      //     var textareaLength = textarea.value.length;
      //     charsRemaining = String(140 - textareaLength);
      //     p.textContent = charsRemaining + ' characters remaining';
      //
      //     if (charsRemaining < 0) {
      //       textarea.style.color = 'red';
      //     }
      //   });
      // });

      document.addEventListener('DOMContentLoaded', function() {
        var composer = document.querySelector('.composer');
        var textarea = composer.querySelector('textarea');
        var counter = composer.querySelector('.counter');
        var button = composer.querySelector('button');

        function updateCounter() {
          var length = textarea.value.length;
          var remaining = 140 - length;
          var message = remaining.toString() + ' characters remaining';
          var invalid = remaining < 0;

          textarea.classList.toggle('invalid', invalid);
          button.disabled = invalid;
          counter.textContent = message;
        }

        textarea.addEventListener('keyup', updateCounter);
        updateCounter();
      });
    </script>
  </body>
</html>
